pcf8574:
  - id: 'pcf8574_modules_hub'
    address: 0x20
    setup_priority: -100.0
  
  - id: 'pcf8574_relay_hub'
    address: 0x26
    setup_priority: -100.0

switch:
  - name: "Ogrzewanie - Grzejnik"
    platform: gpio
    id: "grzejnik_podlogowka"    
    pin:
      pcf8574: pcf8574_relay_hub
      number: 7
      mode:
        output: true
      inverted: true      
    restore_mode: RESTORE_DEFAULT_ON
    
    on_turn_on:
      if:
        condition:
          binary_sensor.is_off: blokada_obiegu_grzejnika
        then:
          - logger.log: 
              format: "Włączono pętlę grzejnika"
              level: INFO
        else:
          - switch.turn_off: grzejnik_podlogowka
          - logger.log: 
              format: "Pętla grzejnika jest zablokowana"
              level: WARN

  - name: "Ogrzewanie - Łazienka"
    id: heating_lazienka
    platform: gpio
    pin:
      pcf8574: pcf8574_relay_hub
      number: 1
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_ON      

  - name: "Ogrzewanie Salon I"    
    id: heating_salon_1
    platform: gpio    
    pin:
      pcf8574: pcf8574_relay_hub
      number: 2
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_OFF      
  
  - name: "Ogrzewanie Salon II"    
    id: heating_salon_2
    platform: gpio
    pin:
      pcf8574: pcf8574_relay_hub
      number: 3
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_OFF

  - name: "Ogrzewanie Kuchnia"    
    id: heating_kuchnia
    platform: gpio    
    pin:
      pcf8574: pcf8574_relay_hub
      number: 4
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_OFF
      
  - name: "Ogrzewanie - Pokój"
    id: heating_pokoj
    platform: gpio
    pin:
      pcf8574: pcf8574_relay_hub
      number: 5
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_OFF
      
  - name: "Ogrzewanie - Sypialnia"
    id: heating_sypialnia  
    platform: gpio        
    pin:
      pcf8574: pcf8574_relay_hub
      number: 6
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_OFF
    
  - name: "Grzałka przekaznik"
    id: grzalka_przekaznik
    platform: gpio
    device_id: grzalka_device    
    pin:
      pcf8574: pcf8574_modules_hub
      number: 3
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_ON
    web_server:
      sorting_group_id: grzalka_group
      
  - name: "Podświetlenie"
    id: szafka_oswietlenie        
    platform: gpio
    pin:
      pcf8574: pcf8574_modules_hub
      number: 0
      mode:
        output: true
      inverted: true
    restore_mode: RESTORE_DEFAULT_OFF
    internal: true

output:
  - platform: gpio
    id: "grzalka_time_signal"    
    pin:
      pcf8574: pcf8574_modules_hub
      number: 1
      mode:
        output: true
      inverted: true

  - platform: gpio
    id: "grzalka_power_signal"
    pin:
      pcf8574: pcf8574_modules_hub      
      number: 2
      mode:
        output: true
      inverted: true
